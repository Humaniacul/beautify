image: "r8.im/humaniacul/beautify-stable-makeup"

build:
  gpu: true
  python_version: "3.10"
  python_packages:
    # Core ML packages
    - torch==2.0.1
    - torchvision==0.15.2
    - diffusers==0.25.1
    - transformers==4.36.0
    - accelerate==0.23.0
    
    # Image processing
    - opencv-python==4.8.1.78
    - Pillow==10.0.1
    - numpy==1.26.0
    - scikit-image==0.22.0
    
    # Face detection and landmarks
    - face-alignment==1.3.5
    - mediapipe==0.10.8
    - facexlib==0.3.0
    - spiga==0.0.6
    - requests==2.31.0
    - matplotlib==3.8.0
    - einops==0.7.0
    - safetensors==0.4.0
    
    # Compatibility versions
    - huggingface-hub==0.20.3
    - tokenizers==0.15.0
    
    # Direct git packages for exact compatibility
    - git+https://github.com/sajjjadayobi/FaceLib.git@382841efec823f059f49754e5d378abb12cfb551
    
    # Cog requirement
    - cog
  
  system_packages:
    - libgl1-mesa-glx
    - libglib2.0-0
    - libsm6
    - libxext6
    - libxrender-dev
    - libgomp1
    - ffmpeg
    - git

predict: "predict.py:Predictor" 